[!exec:git] stop

mkhomedir golden
mkhomedir

chezmoi init

# create a commit
cp golden/.bashrc $CHEZMOISOURCEDIR/dot_bashrc # FIXME use chezmoi add
chezmoi git add dot_bashrc
chezmoi git commit -- --message 'Add dot_bashrc'

# test that updating a file creates a commit
chezmoi edit $HOME${/}.bashrc
chezmoi git log
stdout 'Update dot_bashrc'

[short] stop

# test that removing a file creates a commit
chezmoi forget --force $HOME${/}.bashrc
chezmoi git log
stdout 'Remove dot_bashrc'

-- home/user/.config/chezmoi/chezmoi.toml --
[git]
    autoCommit = true
